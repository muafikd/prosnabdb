# Ð¡Ð²Ð¾Ð´ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð´Ð»Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ VPS Ñ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¼ Nginx

## ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

### 1. `docker-compose.vps.yml`
**ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:** Docker Compose ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ VPS Ñ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¼ Nginx

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- âœ… Backend Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð° `localhost:8000` (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ localhost)
- âœ… Frontend Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð° `localhost:3000` (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ localhost)
- âœ… PostgreSQL Ð¸ Redis Ð½Ðµ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÑŽÑ‚ÑÑ Ð½Ð°Ñ€ÑƒÐ¶Ñƒ
- âœ… Ð’ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð² Ð¾Ð´Ð½Ð¾Ð¹ Docker ÑÐµÑ‚Ð¸

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
```bash
cp docker-compose.vps.yml docker-compose.yml
```

---

### 2. `nginx/nginx.conf`
**ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:** ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Nginx Ð´Ð»Ñ HTTPS (production)

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- âœ… SSL/HTTPS Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°
- âœ… ÐŸÑ€Ð¾ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ðº frontend (localhost:3000)
- âœ… ÐŸÑ€Ð¾ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ API Ðº backend (localhost:8000)
- âœ… ÐŸÑ€Ð¾ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÐºÐ¸ Ð¸ Ð¼ÐµÐ´Ð¸Ð°
- âœ… Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ (Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸, SSL Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸)

**Ð Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ:** `/etc/nginx/sites-available/prosnabdb`

---

### 3. `nginx/nginx-http.conf`
**ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:** ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Nginx Ð´Ð»Ñ HTTP (Ð´Ð»Ñ Ð¿ÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸)

**ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:**
- âœ… Ð‘ÐµÐ· SSL (Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ)
- âœ… Ð¢Ð° Ð¶Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
- âœ… Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°

**Ð Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ:** `/etc/nginx/sites-available/prosnabdb`

---

### 4. `frontend/nginx.conf.simple`
**ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:** Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ nginx Ð´Ð»Ñ frontend ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°

**ÐšÐ¾Ð³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ:**
- ÐŸÑ€Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ð²Ð½ÐµÑˆÐ½ÐµÐ³Ð¾ Nginx Ð½Ð° VPS
- ÐšÐ¾Ð³Ð´Ð° Ð²Ð½ÐµÑˆÐ½Ð¸Ð¹ Nginx Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ Ð²ÑÐµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ

**ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:** Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ `frontend/nginx.conf` Ñ‚Ð¾Ð¶Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ, Ð½Ð¾ Ñ Ð´Ð²Ð¾Ð¹Ð½Ñ‹Ð¼ Ð¿Ñ€Ð¾ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼.

---

### 5. `VPS_NGINX_SETUP_GUIDE.md`
**ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:** ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¿Ð¾ÑˆÐ°Ð³Ð¾Ð²Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ

**Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:**
- Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker Ð¸ Nginx
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Nginx
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSL
- Troubleshooting
- Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ
- Ð‘ÑÐºÐ°Ð¿Ñ‹

---

### 6. `VPS_QUICK_START.md`
**ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:** ÐšÑ€Ð°Ñ‚ÐºÐ°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ ÑÑ‚Ð°Ñ€Ñ‚Ð°

**Ð”Ð»Ñ ÐºÐ¾Ð³Ð¾:** Ð”Ð»Ñ Ð¾Ð¿Ñ‹Ñ‚Ð½Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹, Ð½ÑƒÐ¶Ð½Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐºÑ€Ð°Ñ‚ÐºÐ°Ñ ÑÐ¿Ñ€Ð°Ð²ÐºÐ°

---

### 7. `NGINX_CONFIGURATION_OPTIONS.md`
**ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:** ÐžÐ±ÑŠÑÑÐ½ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Nginx

**Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:**
- Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: Nginx Ð²Ð½ÑƒÑ‚Ñ€Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð° (Ð´Ð»Ñ Coolify)
- Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Ð’Ð½ÐµÑˆÐ½Ð¸Ð¹ Nginx Ð½Ð° VPS (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
- ÐšÐ°Ðº Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ð¼ÐµÐ¶Ð´Ñƒ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð°Ð¼Ð¸

---

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### 1. ÐÐ° VPS ÑÐµÑ€Ð²ÐµÑ€Ðµ:

```bash
# ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚
git clone https://github.com/muafikd/prosnabdb.git
cd prosnabdb

# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ VPS ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
cp docker-compose.vps.yml docker-compose.yml

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env
cat > .env << EOF
DATABASE_PASSWORD=your_password
SECRET_KEY=$(python3 -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())")
DEBUG=0
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com
EOF
```

### 2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹:

```bash
docker compose build
docker compose up -d
```

### 3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Nginx:

```bash
# HTTP Ð²ÐµÑ€ÑÐ¸Ñ (Ð´Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°)
sudo cp nginx/nginx-http.conf /etc/nginx/sites-available/prosnabdb
sudo sed -i 's/yourdomain.com/Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.com/g' /etc/nginx/sites-available/prosnabdb
sudo ln -s /etc/nginx/sites-available/prosnabdb /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx
```

### 4. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ SSL:

```bash
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# ÐŸÐ¾ÑÐ»Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ HTTPS Ð²ÐµÑ€ÑÐ¸ÑŽ
sudo cp nginx/nginx.conf /etc/nginx/sites-available/prosnabdb
sudo sed -i 's/yourdomain.com/Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.com/g' /etc/nginx/sites-available/prosnabdb
sudo nginx -t && sudo systemctl reload nginx
```

---

## ðŸ“Š ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```
Ð˜Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚
    â†“
Nginx (VPS, Ð¿Ð¾Ñ€Ñ‚ 80/443)
    â”œâ”€â”€ / â†’ Frontend ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ (localhost:3000)
    â”œâ”€â”€ /api/ â†’ Backend ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ (localhost:8000)
    â”œâ”€â”€ /admin/ â†’ Backend ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ (localhost:8000)
    â”œâ”€â”€ /static/ â†’ Backend ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ (localhost:8000)
    â””â”€â”€ /media/ â†’ Backend ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ (localhost:8000)
```

---

## ðŸ”’ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

### ÐŸÐ¾Ñ€Ñ‚Ñ‹:
- âœ… Backend: Ñ‚Ð¾Ð»ÑŒÐºÐ¾ `127.0.0.1:8000` (Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¸Ð·Ð²Ð½Ðµ)
- âœ… Frontend: Ñ‚Ð¾Ð»ÑŒÐºÐ¾ `127.0.0.1:3000` (Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¸Ð·Ð²Ð½Ðµ)
- âœ… PostgreSQL: Ð½Ðµ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ÑÑ
- âœ… Redis: Ð½Ðµ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ÑÑ
- âœ… Nginx: Ð¿Ð¾Ñ€Ñ‚Ñ‹ 80 Ð¸ 443 (Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ)

### Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸:
1. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐ¸Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð² .env
2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ firewall (UFW)
3. Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐ¹Ñ‚Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ
4. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹
5. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ SSL (Let's Encrypt)

---

## ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

- **ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾:** `VPS_NGINX_SETUP_GUIDE.md`
- **Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚:** `VPS_QUICK_START.md`
- **Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸:** `NGINX_CONFIGURATION_OPTIONS.md`

---

## âœ… Ð§ÐµÐºÐ»Ð¸ÑÑ‚

- [ ] Docker Ð¸ Docker Compose ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
- [ ] Nginx ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
- [ ] ÐŸÑ€Ð¾ÐµÐºÑ‚ ÐºÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½
- [ ] docker-compose.vps.yml Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½
- [ ] .env Ñ„Ð°Ð¹Ð» ÑÐ¾Ð·Ð´Ð°Ð½
- [ ] ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ñ‹
- [ ] DNS Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹
- [ ] Nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð°
- [ ] SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½
- [ ] Firewall Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] Ð¡ÑƒÐ¿ÐµÑ€Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑÐ¾Ð·Ð´Ð°Ð½
- [ ] Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾

---

## ðŸ†˜ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

Ð•ÑÐ»Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ `VPS_NGINX_SETUP_GUIDE.md` â†’ Ñ€Ð°Ð·Ð´ÐµÐ» Troubleshooting
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸: `docker compose logs` Ð¸ `sudo tail -f /var/log/nginx/*.log`
3. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ð¿Ð¾Ñ€Ñ‚Ñ‹ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ
